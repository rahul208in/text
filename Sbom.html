
<!DOCTYPE html>
<html>
<head>
    <title>SBOM to HTML Converter</title>
    <style>
        table {
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>SBOM to HTML Converter</h1>
    <input type="file" id="sbom-file" accept=".json">
    <button id="convert-button">Convert to HTML</button>
    <div id="sbom-data"></div>

    <script>
        const sbomFileInput = document.getElementById('sbom-file');
        const convertButton = document.getElementById('convert-button');
        const sbomDataDiv = document.getElementById('sbom-data');

        convertButton.addEventListener('click', () => {
            const file = sbomFileInput.files <sup> </sup>;
            if (!file) {
                alert('Please select a SBOM JSON file');
                return;
            }

            if (!file.name.endsWith('.json')) {
                alert('Please select a JSON file');
                return;
            }

            const reader = new FileReader();
            reader.onload = (event) => {
                try {
                    const sbomData = JSON.parse(event.target.result);
                    convertSBOMtoHTML(sbomData);
                } catch (error) {
                    alert('Error parsing JSON file:'+ error.message);
                }
            };
            reader.readAsText(file);
        });

        function convertSBOMtoHTML(sbomData) {
            sbomDataDiv.innerHTML = '';

            sbomData.forEach(dependency => {
                const table = document.createElement('table');
                table.innerHTML = `
                    <tr><th>Library</th><td>${dependency.name}</td></tr>
                    <tr><th>Version</th><td>${dependency.version}</td></tr>
                    <tr><th>Description</th><td>${dependency.description}</td></tr>
                    <tr><th>Licenses</th><td>${dependency.licenses.map(license => license.license.id).join(', ')}</td></tr>
                    <tr><th>PURL</th><td>${dependency.purl}</td></tr>
                `;
                sbomDataDiv.appendChild(table);
            });
        }
    </script>
</body>
</html>
